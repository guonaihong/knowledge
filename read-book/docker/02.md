# 理解进程：容器中的init进程和Linux信号

## 问题背景

- 容器中的1号进程（init进程）无法通过常规的`kill`命令终止。

## 1号进程（init进程）

### 定义

- 容器中的1号进程，即init进程，是用户态的第一个进程。
- 它负责创建Namespace中的其他所有进程。

### 起源

- Linux启动后，内核加载完成后，执行的第一个用户态程序就是init进程。
- 主流Linux发行版使用`/sbin/init`作为init进程，通常指向Systemd。

### 作用

- 管理容器内所有进程的生命周期。
- 处理孤儿进程和僵尸进程问题。

## Linux信号

### 定义

- 信号是Linux进程收到的一种通知或中断。

### 类型

- 信号编号通常从1到31，例如：
  - `SIGHUP`：1
  - `SIGINT`：2（通常由Ctrl+C产生）
  - `SIGTERM`：15（默认kill命令信号）
  - `SIGKILL`：9（强制终止进程，不可被捕获或忽略）

### 处理方式

1. **忽略（Ignore）**：对信号不做任何处理（除了SIGKILL和SIGSTOP）。
2. **捕获（Catch）**：注册自定义的信号处理函数（SIGKILL和SIGSTOP除外）。
3. **缺省行为（Default）**：执行系统预定义的行为。

### 容器中的信号问题

- 在容器中，对1号进程使用`kill 1`或`kill -9 1`通常无效。
- 这与init进程的特殊性和信号的处理机制有关。

## 实践操作

- 使用Docker构建容器，并以特定脚本作为init进程。
- 通过`docker exec`进入容器执行`kill 1`和`kill -9 1`来观察效果。

## 进一步学习

- 深入理解Linux信号和进程管理，以及如何在容器化环境中有效管理进程生命周期。

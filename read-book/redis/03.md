# Redis单线程高性能IO模型知识点总结

## Redis单线程的定义

- Redis的单线程主要指的是网络IO和键值对读写操作由一个线程完成。
- 其他功能如持久化、异步删除、集群数据同步等可能由额外的线程执行。

## 为什么使用单线程

- 多线程开发中的共享资源并发访问控制问题会带来额外开销。
- 多线程可能导致系统代码的易调试性和可维护性降低。
- 单线程避免了复杂的并发控制问题。

## 单线程如何实现高性能

1. **内存操作**：大部分操作在内存上完成。
2. **高效数据结构**：采用哈希表和跳表等。
3. **多路复用机制**：允许并发处理大量客户端请求，实现高吞吐率。

## 多路复用机制详解

- 基本IO模型中存在潜在阻塞点，如`accept()`和`recv()`。
- 非阻塞模式设置：通过设置socket为非阻塞模式，避免线程在阻塞点长时间等待。
- Linux中的IO多路复用机制：如`select`/`epoll`，允许内核同时监听多个套接字。

## 基于多路复用的高性能IO模型

- 内核监听多个套接字上的连接请求或数据请求。
- 请求到达时触发事件，事件被放入事件队列。
- 单线程循环处理事件队列，调用相应的回调函数。

## Redis 6.0的多线程模型

- Redis 6.0引入了多线程模型，但读写内存操作仍由单个主线程执行。
- 多线程模型可能引入并发控制问题，但具体影响将在后续课程中介绍。

## 性能瓶颈思考

- 在Redis基本IO模型中，耗时的操作可能影响其他事件的及时处理。

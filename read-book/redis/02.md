# Redis数据结构知识点整理

## Redis的快速特性

- **内存数据库**：所有操作都在内存上完成，内存访问速度快。
- **数据结构**：键值对按数据结构组织，高效数据结构是快速处理数据的基础。

## 底层数据结构

- **简单动态字符串**：String类型的底层实现。
- **双向链表**：List、Hash、Set和SortedSet的底层实现之一。
- **压缩列表**：List、Hash、Set和SortedSet的底层实现之一。
- **哈希表**：数据结构的查找和存储。
- **跳表**：SortedSet的底层实现，支持快速查找。
- **整数数组**：List、Set的底层实现之一。

## Redis数据类型和底层数据结构对应关系

- **String**：简单动态字符串。
- **List**：双向链表或整数数组。
- **Hash**：压缩列表或哈希表。
- **Set**：整数数组或哈希表。
- **Sorted Set**：跳表。

## 键和值的组织结构

- **全局哈希表**：保存所有键值对，每个哈希桶保存键值对的指针。

## 哈希表的冲突问题和rehash

- **链式哈希**：解决哈希冲突，用链表保存同一个哈希桶中的元素。
- **rehash**：增加哈希桶数量，减少冲突，通过两个全局哈希表实现渐进式rehash。

## 集合数据操作效率

- **单元素操作**：复杂度由数据结构决定，如哈希表的HGET、HSET是O(1)。
- **范围操作**：如HGETALL、SMEMBERS，复杂度O(N)，耗时。
- **统计操作**：如LLEN、SCARD，复杂度O(1)，高效。
- **特殊情况**：如List的LPOP、RPOP，复杂度O(1)。

## 集合类型操作的复杂度

- **单元素操作**：基础操作，复杂度O(1)。
- **范围操作**：耗时，复杂度O(N)。
- **统计操作**：高效，复杂度O(1)。
- **例外情况**：特定操作具有特殊复杂度。

## 数据结构的选择和使用

- 根据操作的复杂度和场景选择合适的数据结构。
- 掌握数据结构原理，合理推断操作的复杂度，做出选择。

## 每课一问

- **问题**：整数数组和压缩列表在查找时间复杂度方面并没有很大的优势，为什么Redis还会把它们作为底层数据结构？
  - **回答**：内存利用率高，紧凑的数据结构占用内存少，对CPU高速缓存友好。
